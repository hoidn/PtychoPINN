# Test Suite Index

This is a minimal index of key tests in this branch.

- `tests/test_generate_data.py`: data generation sanity checks.
- `tests/test_generic_loader.py`: loader and container checks.
- `tests/test_tf_helper.py`: core TensorFlow helper utilities.
- `tests/workflows/`: workflow-level tests and scripts.
- `tests/tools/test_d0_parity_logger.py`: D0 parity logger CLI acceptance tests.
  - Selector: `pytest tests/tools/test_d0_parity_logger.py::test_cli_emits_outputs -q`
  - Validates multi-dataset Markdown coverage with raw/normalized/grouped stage tables.
  - See `inbox/README_prepare_d0_response.md` for CLI scope.
- `tests/tools/test_check_inbox_for_ack_cli.py`: Inbox acknowledgement CLI tests (SLA watch + history logging + status snippet).
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_sla_watch_flags_breach -q`
  - Tests `--sla-hours` and `--fail-when-breached` flags for SLA breach detection.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T015222Z/logs/pytest_check_inbox.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_history_logging_appends_entries -q`
  - Tests `--history-jsonl` and `--history-markdown` flags for persistent history logging.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T015222Z/logs/pytest_check_inbox_history.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_status_snippet_emits_wait_summary -q`
  - Tests `--status-snippet` flag for generating a Markdown status snapshot with ack status, SLA breach, timeline, and (when `--history-jsonl` provided) "Ack Actor Breach Timeline" section with per-actor breach data.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T113500Z/logs/pytest_status_snippet.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_escalation_note_emits_call_to_action -q`
  - Tests `--escalation-note` flag for generating a Markdown escalation draft with Summary Metrics, SLA Watch, Action Items, Proposed Message blockquote, Timeline, and (when `--history-jsonl` provided) "Ack Actor Breach Timeline" section with per-actor breach data.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T113500Z/logs/pytest_escalation_note.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_escalation_brief_targets_blocker -q`
  - Tests `--escalation-brief` flag for generating a Markdown escalation brief for a third-party recipient (e.g., Maintainer <3>) about a blocking actor (e.g., Maintainer <2>). Includes Blocking Actor Snapshot, Breach Streak Summary, Action Items, Proposed Message, and (when `--history-jsonl` provided) "Ack Actor Breach Timeline" section.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T123500Z/logs/pytest_escalation_brief.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_history_dashboard_summarizes_runs -q`
  - Tests `--history-dashboard` flag for generating a Markdown history dashboard with Summary Metrics, SLA Breach Stats, and Recent Scans timeline.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T023500Z/logs/pytest_history_dashboard.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_supports_multiple_inbound_maintainers -q`
  - Tests `--ack-actor` repeatable flag for configurable acknowledgement sources (default: Maintainer <2>; can add Maintainer <3>).
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T024800Z/logs/pytest_ack_actor_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_custom_keywords_enable_ack_detection -q`
  - Tests that user-provided `--keywords` are honored exactly (no hidden hard-coded list).
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T024800Z/logs/pytest_keywords_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_wait_metrics_cover_each_actor -q`
  - Tests per-actor wait metrics in `ack_actor_stats` block: each configured ack actor gets hours_since_last_inbound, inbound_count, ack_files.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T031500Z/logs/pytest_ack_actor_wait_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_sla_watch_reports_deadline_and_severity -q`
  - Tests SLA deadline/severity fields in `sla_watch` block: `deadline_utc`, `breach_duration_hours`, `severity` (ok/warning/critical).
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T040500Z/logs/pytest_sla_severity_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_sla_metrics_include_deadline -q`
  - Tests per-actor SLA metrics in `ack_actor_stats` block: each configured actor gets `sla_deadline_utc`, `sla_breached`, `sla_breach_duration_hours`, `sla_severity`, `sla_notes`. Actors without inbound show `sla_severity == "unknown"`.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T050500Z/logs/pytest_sla_metrics_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_sla_overrides_thresholds -q`
  - Tests `--ack-actor-sla` repeatable flag for per-actor SLA threshold overrides (e.g., `--ack-actor-sla "Maintainer <2>=2.0"`). Validates that each actor's breach status uses their specific threshold, JSON includes `ack_actor_sla_hours` parameter and `sla_threshold_hours` per actor, and Markdown shows "Threshold (hrs)" column.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T060500Z/logs/pytest_sla_override_collect.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_sla_summary_flags_breach -q`
  - Tests `ack_actor_summary` structure that groups actors by severity (critical/warning/ok/unknown). Validates JSON buckets, Markdown "## Ack Actor SLA Summary" section with severity subsections, and CLI stdout "Ack Actor SLA Summary:" with `[CRITICAL]`/`[OK]` labels.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T070500Z/logs/pytest_ack_actor_summary.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_history_tracks_severity -q`
  - Tests `ack_actor_summary` persistence in history logging. Validates that JSONL entries contain the full severity bucket structure, and Markdown history table gains "Ack Actor Severity" column with `[CRITICAL]`/`[UNKNOWN]` formatted entries.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T083500Z/logs/pytest_ack_actor_history.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_history_dashboard_actor_severity_trends -q`
  - Tests `--history-dashboard` "Ack Actor Severity Trends" section that aggregates per-actor severity counts, longest wait, and latest scan timestamps across all JSONL entries. Validates severity priority sorting (critical > unknown).
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T093500Z/logs/pytest_history_dashboard_actor_severity.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_history_dashboard_actor_breach_timeline -q`
  - Tests `--history-dashboard` "Ack Actor Breach Timeline" section that tracks per-actor breach state (breach start, streak count, hours past SLA) across all JSONL entries. Validates severity priority sorting, current streak counting, and breach start timestamp tracking.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T103500Z/logs/pytest_breach_timeline.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_ack_actor_followups_track_outbound_targets -q`
  - Tests per-actor follow-up (outbound) activity tracking. Validates `ack_actor_stats` contains `last_outbound_utc`, `hours_since_last_outbound`, `outbound_count` per actor (derived from To:/CC: lines). Validates "Ack Actor Follow-Up Activity" table in status snippet and other Markdown outputs.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T133500Z/logs/pytest_followups.log`
  - Tests `--history-dashboard` "Ack Actor Breach Timeline" section that tracks per-actor breach state: breach start timestamps, latest scans, consecutive breach streaks, and hours past SLA. Validates actors in OK/unknown are excluded; severity priority sorting (critical > warning); streak resets when returning to OK.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T103500Z/logs/pytest_history_dashboard_actor_breach.log`
  - Selector: `pytest tests/tools/test_check_inbox_for_ack_cli.py::test_history_followups_persist -q`
  - Tests history persistence of per-actor follow-up (outbound) activity. Validates `ack_actor_followups` in JSONL entries with correct outbound counts per actor. Validates "Ack Actor Follow-Ups" column in Markdown history table. Validates "## Ack Actor Follow-Up Trends" section in history dashboard with Latest Outbound UTC, Hours Since Outbound, Max Outbound Count, and Scans w/ Outbound columns.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T143500Z/logs/pytest_history_followups.log`
- `tests/tools/test_update_maintainer_status.py`: Maintainer status automation CLI tests.
  - Selector: `pytest tests/tools/test_update_maintainer_status.py::test_cli_generates_followup -q`
  - Tests `update_maintainer_status.py` CLI that reads `inbox_scan_summary.json` and generates: (1) status block appended to response document with actor tables and SLA metrics, (2) follow-up note with To/CC recipients, metrics, and action items.
  - Logs: `plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-23T153500Z/logs/pytest_update_status.log`
  - Selector: `pytest tests/tools/test_update_maintainer_status.py::test_cli_missing_scan_json_exits_nonzero -q`
  - Tests that CLI exits non-zero when scan JSON file is missing.
  - Selector: `pytest tests/tools/test_update_maintainer_status.py::test_cli_missing_response_doc_exits_nonzero -q`
  - Tests that CLI exits non-zero when response document is missing.
  - Selector: `pytest tests/tools/test_update_maintainer_status.py::test_cli_handles_none_timestamps -q`
  - Tests that CLI handles None/null timestamps gracefully (shows '---' instead of crashing).
