### **Agent Implementation Checklist: Phase 4 - Documentation and Final Validation**

**Overall Goal for this Phase:** To complete documentation updates and perform basic validation of the enhanced evaluation pipeline.

**Instructions for Agent:**
1. Copy this checklist into your working memory.
2. Update the `State` for each item as you progress: `[ ]` (Open) -> `[P]` (In Progress) -> `[D]` (Done).
3. Follow the `How/Why & API Guidance` column carefully for implementation details.

---

| ID  | Task Description                                   | State | How/Why & API Guidance                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       -
| :-- | :------------------------------------------------- | :---- | :-------------------------------------------------
| **Section 1: Documentation Updates**
| 1.A | **Update CLAUDE.md with New Evaluation Features**  | `[D]` | **Why:** To ensure AI assistants understand the enhanced evaluation capabilities. <br> **How:** Add section describing new metrics (SSIM, MS-SSIM), debug image workflow, and advanced comparison options. Include examples of new command-line flags like `--save-debug-images`, `--ms-ssim-sigma`, `--phase-align-method`. <br> **File:** Update `CLAUDE.md` evaluation sections. <br> **Content:** Document debug image generation, new metric descriptions, CLI flag reference.
| 1.B | **Verify All Previous Checklists Are Complete**    | `[D]` | **Why:** To ensure proper phase tracking and documentation consistency. <br> **How:** Check that `phase_1_checklist.md`, `phase_2_checklist.md`, `phase_3_checklist.md` all show `[D]` status for all tasks. <br> **Files:** Review all three phase checklists to confirm completion status.
| 1.C | **Update Implementation Plan Status**               | `[D]` | **Why:** To mark the evaluation enhancements initiative as complete. <br> **How:** Update `docs/refactor/eval_enhancements/implementation_eval_enhancements.md` to mark Phase 4 as complete with checkmark. <br> **File:** `implementation_eval_enhancements.md` Phase Tracking section.
| **Section 2: Basic Validation**
| 2.A | **Verify Core Pipeline Still Works**               | `[D]` | **Why:** To ensure recent changes haven't broken basic functionality. <br> **How:** Run one comparison with new metrics: `python scripts/compare_models.py --pinn_dir large_generalization_study_tike_test/train_1024/pinn_run --baseline_dir large_generalization_study_tike_test/train_1024/baseline_run --test_data tike_outputs/fly001_final_downsampled/fly001_final_downsampled_data_transposed.npz --output_dir phase4_validation`. <br> **Success:** CSV contains all expected metrics including `ssim`, `ms_ssim` with reasonable values.
| 2.B | **Test Debug Image Generation**                    | `[D]` | **Why:** To verify debug functionality works as documented. <br> **How:** Re-run comparison with `--save-debug-images` flag. Check that debug directories are created with expected PNG files. <br> **Verification:** Debug images show meaningful content and preprocessing visualization.
| **Section 3: Finalization**
| 3.A | **Confirm R&D Plan Success Criteria Met**          | `[D]` | **Why:** To verify the initiative achieves its stated goals. <br> **How:** Review `docs/refactor/eval_enhancements/plan_eval_enhancements.md` success criteria and confirm: (1) SSIM/MS-SSIM implemented ✓, (2) Phase alignment configurable ✓, (3) Backward compatibility maintained ✓, (4) Debug visualization available ✓. <br> **Result:** All R&D objectives achieved.
| 3.B | **Update PROJECT_STATUS.md**                       | `[D]` | **Why:** To mark the evaluation enhancements initiative as complete and ready for next initiative. <br> **How:** Move "Evaluation Enhancements" from "Current Active Initiative" to "Completed Initiatives" section. Update status to ✅ Complete. <br> **File:** `docs/PROJECT_STATUS.md`