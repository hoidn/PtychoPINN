============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /home/ollie/miniconda3/envs/ptycho311/bin/python3.11
cachedir: .pytest_cache
PyTorch: available
PyTorch version: 2.8.0+cu128
rootdir: /home/ollie/Documents/PtychoPINN2
configfile: pyproject.toml
plugins: anyio-4.9.0
collecting ... collected 1 item

<Dir PtychoPINN2>
  <Package tests>
    <Package study>
      <Module test_phase_g_dense_orchestrator.py>
        Tests for Phase G dense orchestrator summary helper.
        <Function test_run_phase_g_dense_exec_prints_highlights_preview>
          Test that main() in real execution mode prints an "Aggregate highlights" preview after reporting helper.
          
          Acceptance:
          - Loads main() from orchestrator script via importlib
          - Stubs prepare_hub, validate_phase_c_metadata, summarize_phase_g_outputs (no-op for speed)
          - Stubs run_command to write deterministic highlights text when reporting helper is invoked
          - Runs main() without --collect-only to trigger real execution path
          - Captures stdout via capsys
          - Asserts stdout contains "Aggregate highlights preview" banner
          - Asserts stdout contains sample highlights content (MS-SSIM/MAE deltas)
          - Returns 0 exit code on success
          
          Follows TYPE-PATH-001 (Path normalization).

========================== 1 test collected in 0.83s ===========================
