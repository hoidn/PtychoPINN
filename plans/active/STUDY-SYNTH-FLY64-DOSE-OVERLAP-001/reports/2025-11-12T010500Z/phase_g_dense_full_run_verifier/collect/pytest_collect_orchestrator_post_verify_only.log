============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /home/ollie/miniconda3/envs/ptycho311/bin/python3.11
cachedir: .pytest_cache
PyTorch: available
PyTorch version: 2.8.0+cu128
rootdir: /home/ollie/Documents/PtychoPINN2
configfile: pyproject.toml
plugins: anyio-4.9.0
collecting ... collected 18 items / 16 deselected / 2 selected

<Dir PtychoPINN2>
  <Package tests>
    <Package study>
      <Module test_phase_g_dense_orchestrator.py>
        Tests for Phase G dense orchestrator summary helper.
        <Function test_run_phase_g_dense_collect_only_post_verify_only>
          Test that main() with --collect-only --post-verify-only prints only verification commands (SSIM grid + verify + check).
          
          Acceptance:
          - Loads main() from orchestrator script via importlib
          - Runs with --collect-only --post-verify-only into a tmp hub directory
          - Asserts stdout contains only SSIM grid, verify, and check commands with hub-relative log paths
          - Verifies Phase C→F commands are NOT printed
          - Returns 0 exit code on success
          
          Follows TYPE-PATH-001 (hub-relative paths), TEST-CLI-001 (collect-only mode validation).
        <Function test_run_phase_g_dense_post_verify_only_executes_chain>
          Test that main() with --post-verify-only executes verification commands in correct order (SSIM grid → verify → check).
          
          Acceptance:
          - Loads main() from orchestrator script via importlib
          - Monkeypatches run_command to capture invocations and generate_artifact_inventory to record call
          - Runs with --post-verify-only into a tmp hub directory
          - Asserts run_command was called exactly 3 times with correct command order: [ssim_grid, verify, check]
          - Asserts generate_artifact_inventory was called exactly once
          - Asserts stdout contains 'analysis/artifact_inventory.txt' path
          - Returns 0 exit code on success
          
          Follows DATA-001 (artifact inventory regeneration), TEST-CLI-001 (command capture).

================ 2/18 tests collected (16 deselected) in 0.89s =================
