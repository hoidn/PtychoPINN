================================================================================
Phase D: Overlap Metrics Generation per specs/overlap_metrics.md
================================================================================
Phase C root:        data/phase_c/dose_1000
Output root:         tmp/phase_d_overlap/gs2_s080_n512
Train NPZ:           patched_train.npz
Test NPZ:            patched_test.npz
Gridsize:            2
s_img:               0.8
n_groups:            512
neighbor_count:      6
probe_diameter_px:   38.4
rng_seed_subsample:  456
================================================================================


============================================================
Generating overlap views (gridsize=2)
s_img=0.8, n_groups=512, K=6, D=38.4px
============================================================

[TRAIN] Processing patched_train.npz...
  Computing overlap metrics...
  Metrics:
    Metric 1 (group-based): 0.8909
    Metric 2 (image-based): 0.8777
    Metric 3 (group↔group): 0.2706
    Images: 4070/5088 (unique: 4070)
    Groups: 512
  Writing output NPZ: tmp/phase_d_overlap/gs2_s080_n512/train.npz
  Writing metrics JSON: tmp/phase_d_overlap/gs2_s080_n512/train_metrics.json
  ✓ TRAIN complete

[TEST] Processing patched_test.npz...
  Computing overlap metrics...
  Metrics:
    Metric 1 (group-based): 0.8942
    Metric 2 (image-based): 0.8794
    Metric 3 (group↔group): 0.2673
    Images: 4173/5216 (unique: 4173)
    Groups: 512
  Writing output NPZ: tmp/phase_d_overlap/gs2_s080_n512/test.npz
  Writing metrics JSON: tmp/phase_d_overlap/gs2_s080_n512/test_metrics.json
  ✓ TEST complete

Writing metrics bundle: tmp/phase_d_overlap/gs2_s080_n512/metrics_bundle.json
============================================================
Overlap view generation complete
============================================================


================================================================================
Overlap view generation completed successfully!
================================================================================
