# PtyChi LSQML Reconstruction Log
# Job: dose=1000.0, view=dense, split=test
# Command: python scripts/reconstruction/ptychi_reconstruct_tike.py --algorithm LSQML --num-epochs 100 --input-npz tmp/phase_d_f2_cli/dose_1000/dense/dense_test.npz --output-dir plans/active/STUDY-SYNTH-FLY64-DOSE-OVERLAP-001/reports/2025-11-04T230000Z/phase_f_ptychi_baseline_f2_dense_test_run/real_run/dose_1000/dense/test
# Return code: 0
#============================================================

=== STDOUT ===
=== PTY-CHI Reconstruction of TIKE Dataset ===
Dataset: tmp/phase_d_f2_cli/dose_1000/dense/dense_test.npz
Algorithm: LSQML
Epochs: 100
Images: 2000
Loading TIKE dataset from: tmp/phase_d_f2_cli/dose_1000/dense/dense_test.npz
Using first 8 images for testing

Converting amplitude to intensity...
  Original amplitude: min=0.000022, max=0.999949, mean=0.497286
  Converted intensity: min=0.00000000, max=0.99989891, mean=0.33025199

Positions shape: (8, 2) (n_images, 2)
  Original X range: [0.01, 0.86]
  Original Y range: [0.11, 0.99]
  Centered X range: [-0.43, 0.42]
  Centered Y range: [-0.53, 0.35]

Configuring LSQML reconstruction...
  Object size: (115, 115)
  Probe power constraint: 1351.943970
  Using GPU acceleration

=== Starting Reconstruction ===
Running 100 epochs...
Reconstruction complete!

=== Saving Results to plans/active/STUDY-SYNTH-FLY64-DOSE-OVERLAP-001/reports/2025-11-04T230000Z/phase_f_ptychi_baseline_f2_dense_test_run/real_run/dose_1000/dense/test ===
Saved NPZ: plans/active/STUDY-SYNTH-FLY64-DOSE-OVERLAP-001/reports/2025-11-04T230000Z/phase_f_ptychi_baseline_f2_dense_test_run/real_run/dose_1000/dense/test/ptychi_reconstruction.npz
Saved visualization: plans/active/STUDY-SYNTH-FLY64-DOSE-OVERLAP-001/reports/2025-11-04T230000Z/phase_f_ptychi_baseline_f2_dense_test_run/real_run/dose_1000/dense/test/reconstruction_visualization.png

Reconstruction Statistics:
  Object shape: (115, 115)
  Object amplitude range: [nan, nan]
  Probe shape: (64, 64)
  Probe amplitude range: [nan, nan]

✓ Reconstruction complete! Results saved to plans/active/STUDY-SYNTH-FLY64-DOSE-OVERLAP-001/reports/2025-11-04T230000Z/phase_f_ptychi_baseline_f2_dense_test_run/real_run/dose_1000/dense/test/


=== STDERR ===
`rescale_probe_intensity_in_first_epoch` and `ProbeOptions.power_constraint` are both enabled, which may lead to unexpected results.
`ObjectOptions.remove_object_probe_ambiguity` and `ProbeOptions.power_constraint` are both enabled, which may lead to unexpected results.
/home/ollie/miniconda3/envs/ptycho311/lib/python3.11/site-packages/torch/utils/_device.py:103: UserWarning: Converting a tensor with requires_grad=True to a scalar may lead to unexpected behavior.
Consider using tensor.detach() first. (Triggered internally at /pytorch/torch/csrc/autograd/generated/python_variable_methods.cpp:835.)
  return func(*args, **kwargs)

  0%|          | 0/100 [00:00<?, ?it/s]
  1%|          | 1/100 [00:00<00:19,  5.15it/s]
  6%|▌         | 6/100 [00:00<00:03, 23.71it/s]
 17%|█▋        | 17/100 [00:00<00:01, 55.61it/s]
 29%|██▉       | 29/100 [00:00<00:00, 76.25it/s]
 41%|████      | 41/100 [00:00<00:00, 88.36it/s]
 53%|█████▎    | 53/100 [00:00<00:00, 96.50it/s]
 65%|██████▌   | 65/100 [00:00<00:00, 101.85it/s]
 77%|███████▋  | 77/100 [00:00<00:00, 105.48it/s]
 89%|████████▉ | 89/100 [00:01<00:00, 108.01it/s]
                                                 

