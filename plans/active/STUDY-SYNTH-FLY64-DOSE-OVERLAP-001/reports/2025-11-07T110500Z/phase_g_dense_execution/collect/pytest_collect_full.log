============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /home/ollie/miniconda3/envs/ptycho311/bin/python3.11
cachedir: .pytest_cache
PyTorch: available
PyTorch version: 2.8.0+cu128
rootdir: /home/ollie/Documents/PtychoPINN2
configfile: pyproject.toml
plugins: anyio-4.9.0
collecting ... collected 4 items

<Dir PtychoPINN2>
  <Package tests>
    <Package study>
      <Module test_phase_g_dense_orchestrator.py>
        Tests for Phase G dense orchestrator summary helper.
        <Function test_summarize_phase_g_outputs>
          Test that summarize_phase_g_outputs() validates manifest, extracts metrics, and emits summaries.
          
          Acceptance:
          - Parses comparison_manifest.json from hub/analysis/
          - Fails fast if n_failed > 0 or metrics CSV missing
          - Extracts MS-SSIM + MAE (amplitude/phase/value) from per-job comparison_metrics.csv
          - Writes deterministic JSON + Markdown summary to hub/analysis/
          
          Follows TYPE-PATH-001 (Path normalization).
        <Function test_summarize_phase_g_outputs_fails_on_missing_manifest>
          Test that summarize_phase_g_outputs() raises RuntimeError if comparison_manifest.json is missing.
        <Function test_summarize_phase_g_outputs_fails_on_execution_failures>
          Test that summarize_phase_g_outputs() raises RuntimeError if n_failed > 0.
        <Function test_summarize_phase_g_outputs_fails_on_missing_csv>
          Test that summarize_phase_g_outputs() raises RuntimeError if comparison_metrics.csv is missing for a successful job.

========================== 4 tests collected in 1.56s ==========================
