{
  "generated_at": "2026-01-20T11:54:06.954003+00:00",
  "scenario_count": 2,
  "scenarios": {
    "gs1_ideal": {
      "name": "gs1_ideal",
      "paths": {
        "base_dir": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal",
        "run_metadata": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/run_metadata.json",
        "intensity_stats": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/intensity_stats.json",
        "inference_stats": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/inference_outputs/stats.json",
        "comparison_metrics": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/comparison_metrics.json",
        "training_summary": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/train_outputs/history_summary.json",
        "prediction_amplitude": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/inference_outputs/amplitude.npy",
        "ground_truth_amplitude": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/ground_truth_amp.npy",
        "prediction_amplitude_unscaled": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/inference_outputs/amplitude_unscaled.npy"
      },
      "intensity": {
        "bundle": 988.211669921875,
        "legacy_params": 988.211669921875,
        "scale_delta": 0.0,
        "normalize_gain": 0.559530321508642,
        "run_metadata": {
          "bundle_intensity_scale": 988.211669921875,
          "intensity_scale": 988.211669921875,
          "json_path": "plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/intensity_stats.json",
          "largest_drop": {
            "from_mean": 0.15274183452129364,
            "from_stage": "grouped_diffraction",
            "key": "grouped_to_normalized",
            "ratio": 0.559530321508642,
            "to_mean": 0.08546368777751923,
            "to_stage": "grouped_X_full"
          },
          "legacy_params_intensity_scale": 988.211669921875,
          "markdown_path": "plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/gs1_ideal/intensity_stats.md",
          "normalize_gain": 0.559530321508642,
          "prediction_scale": {
            "applied": true,
            "least_squares": {
              "denominator": 54168.13979542228,
              "finite_count": 153664,
              "numerator": 99553.23902054355
            },
            "mode": "least_squares",
            "recorded_scale": 988.211669921875,
            "source": "least_squares",
            "value": 1.8378559684074058
          },
          "ratios": {
            "grouped_to_normalized": 0.559530321508642,
            "normalized_to_container": 1.0,
            "raw_to_grouped": 1.0413123525320749
          },
          "scale_delta": 0.0,
          "stage_means": {
            "container_X": 0.08546368777751923,
            "grouped_X_full": 0.08546368777751923,
            "grouped_diffraction": 0.15274183452129364,
            "raw_diffraction": 0.14668205380439758
          },
          "stages": [
            {
              "metadata": {
                "count": 256,
                "source": "RawData"
              },
              "name": "raw_diffraction",
              "stats": {
                "dtype": "float32",
                "finite_count": 1048576,
                "max": 26.895893096923828,
                "mean": 0.14668205380439758,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  256,
                  64,
                  64
                ],
                "std": 0.8442895412445068,
                "total_count": 1048576
              }
            },
            {
              "metadata": {
                "count": 64,
                "gridsize": 1,
                "source": "RawData.generate_grouped_data"
              },
              "name": "grouped_diffraction",
              "stats": {
                "dtype": "float32",
                "finite_count": 262144,
                "max": 26.895893096923828,
                "mean": 0.15274183452129364,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  64,
                  64,
                  64,
                  1
                ],
                "std": 0.8804562091827393,
                "total_count": 262144
              }
            },
            {
              "metadata": {
                "count": 64,
                "source": "normalize_data"
              },
              "name": "grouped_X_full",
              "stats": {
                "dtype": "float32",
                "finite_count": 262144,
                "max": 15.049065589904785,
                "mean": 0.08546368777751923,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  64,
                  64,
                  64,
                  1
                ],
                "std": 0.4926418960094452,
                "total_count": 262144
              }
            },
            {
              "metadata": {
                "group_limit": 64,
                "source": "PtychoDataContainer"
              },
              "name": "container_X",
              "stats": {
                "dtype": "float32",
                "finite_count": 262144,
                "max": 15.049065589904785,
                "mean": 0.08546368777751923,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  64,
                  64,
                  64,
                  1
                ],
                "std": 0.4926418960094452,
                "total_count": 262144
              }
            }
          ]
        },
        "matches_within_1e-6": true,
        "absolute_delta": 0.0
      },
      "comparison": {
        "amplitude": {
          "bias_summary": {
            "mean": -2.293429989713721,
            "median": -2.5243802070617676,
            "p05": -3.7023458957672117,
            "p95": 0.24062742590904238
          },
          "mae": 2.3731070286235534,
          "rmse": 2.560243205336852,
          "max_abs": 4.7676825523376465,
          "pearson_r": 0.10394766414237716,
          "count": 153664,
          "pred_stats": {
            "max": 4.665185928344727,
            "mean": 0.4148174822330475,
            "min": 0.0,
            "nan_count": 0,
            "std": 1.009259819984436
          },
          "truth_stats": {
            "max": 4.85612678527832,
            "mean": 2.708247423171997,
            "min": 0.6128976941108704,
            "nan_count": 0,
            "std": 0.6410303115844727
          }
        },
        "phase": {
          "bias_summary": {
            "mean": 0.17777064789291386,
            "median": 0.0,
            "p05": 0.0,
            "p95": 1.2130691051483156
          },
          "mae": 0.17777064789795644,
          "rmse": 0.4595268801935101,
          "max_abs": 1.3306421041488647,
          "pearson_r": null,
          "count": 153664,
          "pred_stats": {
            "max": 1.3306421041488647,
            "mean": 0.17777064442634583,
            "min": 0.0,
            "nan_count": 0,
            "std": 0.4237482249736786
          },
          "truth_stats": {
            "max": 0.0,
            "mean": 0.0,
            "min": 0.0,
            "nan_count": 0,
            "std": 0.0
          }
        }
      },
      "normalization": [
        {
          "name": "raw_diffraction",
          "source": "RawData",
          "count": 256,
          "gridsize": null,
          "mean": 0.14668205380439758,
          "std": 0.8442895412445068,
          "min": 0.0,
          "max": 26.895893096923828
        },
        {
          "name": "grouped_diffraction",
          "source": "RawData.generate_grouped_data",
          "count": 64,
          "gridsize": 1,
          "mean": 0.15274183452129364,
          "std": 0.8804562091827393,
          "min": 0.0,
          "max": 26.895893096923828
        },
        {
          "name": "grouped_X_full",
          "source": "normalize_data",
          "count": 64,
          "gridsize": null,
          "mean": 0.08546368777751923,
          "std": 0.4926418960094452,
          "min": 0.0,
          "max": 15.049065589904785
        },
        {
          "name": "container_X",
          "source": "PtychoDataContainer",
          "count": null,
          "gridsize": null,
          "mean": 0.08546368777751923,
          "std": 0.4926418960094452,
          "min": 0.0,
          "max": 15.049065589904785
        }
      ],
      "inference": {
        "fits_canvas": true,
        "padded_size": 828,
        "required_canvas": 828,
        "amplitude": {
          "max": 4.665185928344727,
          "mean": 0.4148174822330475,
          "min": 0.0,
          "nan_count": 0,
          "std": 1.009259819984436
        },
        "phase": {
          "max": 1.3306421041488647,
          "mean": 0.17777064442634583,
          "min": 0.0,
          "nan_count": 0,
          "std": 0.4237482249736786
        },
        "offsets": {
          "axis_max_abs": [
            377.02992320243726,
            381.8949744624406
          ],
          "max_abs": 381.8949744624406
        }
      },
      "prediction_scale": {
        "applied": true,
        "least_squares": {
          "denominator": 54168.13979542228,
          "finite_count": 153664,
          "numerator": 99553.23902054355
        },
        "mode": "least_squares",
        "recorded_scale": 988.211669921875,
        "source": "least_squares",
        "value": 1.8378559684074058
      },
      "prediction_scale_note": "least_squares=1.838",
      "training": {
        "has_nan": false,
        "nan_metrics": {},
        "metrics_with_nan": []
      },
      "derived": {
        "stage_means": {
          "raw_diffraction": 0.14668205380439758,
          "grouped_diffraction": 0.15274183452129364,
          "grouped_X_full": 0.08546368777751923,
          "container_X": 0.08546368777751923
        },
        "ratios": {
          "raw_to_grouped": 1.0413123525320749,
          "grouped_to_normalized": 0.559530321508642,
          "normalized_to_prediction": 4.853727858232711,
          "prediction_to_truth": 6.528768769804364
        },
        "largest_drop": {
          "key": "grouped_to_normalized",
          "from_stage": "grouped_diffraction",
          "to_stage": "container_X",
          "ratio": 0.559530321508642,
          "delta": -0.440469678491358,
          "abs_delta": 0.440469678491358
        },
        "scaling_analysis": {
          "count": 153664,
          "ratio_stats": {
            "count": 23065,
            "mean": 1.9674373363761726,
            "median": 1.899192117402228,
            "p05": 1.161100231945031,
            "p95": 3.014249460618884
          },
          "candidate_scalars": {
            "ratio_mean": 1.9674373363761726,
            "ratio_median": 1.899192117402228,
            "ratio_p05": 1.161100231945031,
            "ratio_p95": 3.014249460618884,
            "least_squares": 1.8378559684074058
          },
          "per_scalar_metrics": {
            "ratio_mean": {
              "mae": 2.376088831351235,
              "rmse": 2.5613989121984115
            },
            "ratio_median": {
              "mae": 2.373766162724852,
              "rmse": 2.5605021885809225
            },
            "ratio_p05": {
              "mae": 2.4496204598458164,
              "rmse": 2.5915814456522988
            },
            "ratio_p95": {
              "mae": 2.536217142966165,
              "rmse": 2.6538057256342076
            },
            "least_squares": {
              "mae": 2.373107028650204,
              "rmse": 2.5602432053676525
            }
          },
          "best_scalar": {
            "name": "least_squares",
            "value": 1.8378559684074058,
            "mae": 2.373107028650204,
            "rmse": 2.5602432053676525
          },
          "baseline_errors": {
            "mae": 2.3731070286235534,
            "rmse": 2.560243205336852
          },
          "mae_scaled": 2.373107028650204,
          "rmse_scaled": 2.5602432053676525,
          "best_scalar_name": "least_squares",
          "best_scalar_value": 1.8378559684074058
        }
      }
    },
    "dose_legacy_gs2": {
      "name": "dose_legacy_gs2",
      "paths": {
        "base_dir": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2",
        "run_metadata": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/run_metadata.json",
        "intensity_stats": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/intensity_stats.json",
        "inference_stats": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/inference_outputs/stats.json",
        "comparison_metrics": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/comparison_metrics.json",
        "training_summary": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/train_outputs/history_summary.json",
        "prediction_amplitude": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/inference_outputs/amplitude.npy",
        "ground_truth_amplitude": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/ground_truth_amp.npy",
        "prediction_amplitude_unscaled": "/home/ollie/Documents/tmp/PtychoPINN/plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/inference_outputs/amplitude_unscaled.npy"
      },
      "intensity": {
        "bundle": 988.211669921875,
        "legacy_params": 988.211669921875,
        "scale_delta": 0.0,
        "normalize_gain": 0.28433112983605247,
        "run_metadata": {
          "bundle_intensity_scale": 988.211669921875,
          "intensity_scale": 988.211669921875,
          "json_path": "plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/intensity_stats.json",
          "largest_drop": {
            "from_mean": 1.3160916566848755,
            "from_stage": "grouped_diffraction",
            "key": "grouped_to_normalized",
            "ratio": 0.28433112983605247,
            "to_mean": 0.3742058277130127,
            "to_stage": "grouped_X_full"
          },
          "legacy_params_intensity_scale": 988.211669921875,
          "markdown_path": "plans/active/DEBUG-SIM-LINES-DOSE-001/reports/2026-01-20T114126Z/dose_legacy_gs2/intensity_stats.md",
          "normalize_gain": 0.28433112983605247,
          "prediction_scale": {
            "applied": false,
            "mode": "none",
            "recorded_scale": 988.211669921875,
            "source": null,
            "value": null
          },
          "ratios": {
            "grouped_to_normalized": 0.28433112983605247,
            "normalized_to_container": 1.0,
            "raw_to_grouped": 0.9848799268631327
          },
          "scale_delta": 0.0,
          "stage_means": {
            "container_X": 0.3742058277130127,
            "grouped_X_full": 0.3742058277130127,
            "grouped_diffraction": 1.3160916566848755,
            "raw_diffraction": 1.336296558380127
          },
          "stages": [
            {
              "metadata": {
                "count": 128,
                "source": "RawData"
              },
              "name": "raw_diffraction",
              "stats": {
                "dtype": "float32",
                "finite_count": 524288,
                "max": 5.758124828338623,
                "mean": 1.336296558380127,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  128,
                  64,
                  64
                ],
                "std": 1.18587327003479,
                "total_count": 524288
              }
            },
            {
              "metadata": {
                "count": 32,
                "gridsize": 2,
                "source": "RawData.generate_grouped_data"
              },
              "name": "grouped_diffraction",
              "stats": {
                "dtype": "float32",
                "finite_count": 524288,
                "max": 5.758124828338623,
                "mean": 1.3160916566848755,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  32,
                  64,
                  64,
                  4
                ],
                "std": 1.1663066148757935,
                "total_count": 524288
              }
            },
            {
              "metadata": {
                "count": 32,
                "source": "normalize_data"
              },
              "name": "grouped_X_full",
              "stats": {
                "dtype": "float32",
                "finite_count": 524288,
                "max": 1.6372140645980835,
                "mean": 0.3742058277130127,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  32,
                  64,
                  64,
                  4
                ],
                "std": 0.3316172659397125,
                "total_count": 524288
              }
            },
            {
              "metadata": {
                "group_limit": 32,
                "source": "PtychoDataContainer"
              },
              "name": "container_X",
              "stats": {
                "dtype": "float32",
                "finite_count": 524288,
                "max": 1.6372140645980835,
                "mean": 0.3742058277130127,
                "min": 0.0,
                "nan_count": 0,
                "shape": [
                  32,
                  64,
                  64,
                  4
                ],
                "std": 0.3316172659397125,
                "total_count": 524288
              }
            }
          ]
        },
        "matches_within_1e-6": true,
        "absolute_delta": 0.0
      },
      "comparison": {
        "amplitude": {
          "bias_summary": {
            "mean": -2.6449179724477516,
            "median": -2.6367310285568237,
            "p05": -3.7559924840927126,
            "p95": -1.5689694285392757
          },
          "mae": 2.6449179725080687,
          "rmse": 2.7273773286029965,
          "max_abs": 4.85612678527832,
          "pearson_r": 0.052341757182380995,
          "count": 153664,
          "pred_stats": {
            "max": 0.9664711952209473,
            "mean": 0.06332952529191971,
            "min": 0.0,
            "nan_count": 0,
            "std": 0.2157665193080902
          },
          "truth_stats": {
            "max": 4.85612678527832,
            "mean": 2.708247423171997,
            "min": 0.6128976941108704,
            "nan_count": 0,
            "std": 0.6410303115844727
          }
        },
        "phase": {
          "bias_summary": {
            "mean": 0.015086369100851657,
            "median": 0.0,
            "p05": 0.0,
            "p95": 0.14686674922704712
          },
          "mae": 0.015088910081289804,
          "rmse": 0.07109812853971162,
          "max_abs": 2.007056713104248,
          "pearson_r": null,
          "count": 153664,
          "pred_stats": {
            "max": 2.007056713104248,
            "mean": 0.015086368657648563,
            "min": -0.04494032263755798,
            "nan_count": 0,
            "std": 0.06947910040616989
          },
          "truth_stats": {
            "max": 0.0,
            "mean": 0.0,
            "min": 0.0,
            "nan_count": 0,
            "std": 0.0
          }
        }
      },
      "normalization": [
        {
          "name": "raw_diffraction",
          "source": "RawData",
          "count": 128,
          "gridsize": null,
          "mean": 1.336296558380127,
          "std": 1.18587327003479,
          "min": 0.0,
          "max": 5.758124828338623
        },
        {
          "name": "grouped_diffraction",
          "source": "RawData.generate_grouped_data",
          "count": 32,
          "gridsize": 2,
          "mean": 1.3160916566848755,
          "std": 1.1663066148757935,
          "min": 0.0,
          "max": 5.758124828338623
        },
        {
          "name": "grouped_X_full",
          "source": "normalize_data",
          "count": 32,
          "gridsize": null,
          "mean": 0.3742058277130127,
          "std": 0.3316172659397125,
          "min": 0.0,
          "max": 1.6372140645980835
        },
        {
          "name": "container_X",
          "source": "PtychoDataContainer",
          "count": null,
          "gridsize": null,
          "mean": 0.3742058277130127,
          "std": 0.3316172659397125,
          "min": 0.0,
          "max": 1.6372140645980835
        }
      ],
      "inference": {
        "fits_canvas": true,
        "padded_size": 814,
        "required_canvas": 805,
        "amplitude": {
          "max": 0.9664711952209473,
          "mean": 0.06332952529191971,
          "min": 0.0,
          "nan_count": 0,
          "std": 0.2157665193080902
        },
        "phase": {
          "max": 2.007056713104248,
          "mean": 0.015086368657648563,
          "min": -0.04494032263755798,
          "nan_count": 0,
          "std": 0.06947910040616989
        },
        "offsets": {
          "axis_max_abs": [
            370.01518972033625,
            369.37237917192147
          ],
          "max_abs": 370.01518972033625
        }
      },
      "prediction_scale": {
        "applied": false,
        "mode": "none",
        "recorded_scale": 988.211669921875,
        "source": null,
        "value": null
      },
      "prediction_scale_note": null,
      "training": {
        "has_nan": false,
        "nan_metrics": {},
        "metrics_with_nan": []
      },
      "derived": {
        "stage_means": {
          "raw_diffraction": 1.336296558380127,
          "grouped_diffraction": 1.3160916566848755,
          "grouped_X_full": 0.3742058277130127,
          "container_X": 0.3742058277130127
        },
        "ratios": {
          "raw_to_grouped": 0.9848799268631327,
          "grouped_to_normalized": 0.28433112983605247,
          "normalized_to_prediction": 0.1692371433095067,
          "prediction_to_truth": 42.76437271064695
        },
        "largest_drop": {
          "key": "normalized_to_prediction",
          "from_stage": "container_X",
          "to_stage": "prediction",
          "ratio": 0.1692371433095067,
          "delta": -0.8307628566904933,
          "abs_delta": 0.8307628566904933
        },
        "scaling_analysis": {
          "count": 153664,
          "ratio_stats": {
            "count": 12272,
            "mean": 3.5787468255541293,
            "median": 3.5715766468066352,
            "p05": 2.2962259704762475,
            "p95": 4.894088583277733
          },
          "candidate_scalars": {
            "ratio_mean": 3.5787468255541293,
            "ratio_median": 3.5715766468066352,
            "ratio_p05": 2.2962259704762475,
            "ratio_p95": 4.894088583277733,
            "least_squares": 3.53502737265603
          },
          "per_scalar_metrics": {
            "ratio_mean": {
              "mae": 2.521372646916738,
              "rmse": 2.667157550414045
            },
            "ratio_median": {
              "mae": 2.5213634399137814,
              "rmse": 2.6671520946550435
            },
            "ratio_p05": {
              "mae": 2.5656515860424833,
              "rmse": 2.681647350951303
            },
            "ratio_p95": {
              "mae": 2.570121413087658,
              "rmse": 2.6845912556706537
            },
            "least_squares": {
              "mae": 2.521371434445943,
              "rmse": 2.6671394316200243
            }
          },
          "best_scalar": {
            "name": "ratio_median",
            "value": 3.5715766468066352,
            "mae": 2.5213634399137814,
            "rmse": 2.6671520946550435
          },
          "baseline_errors": {
            "mae": 2.6449179725080687,
            "rmse": 2.7273773286029965
          },
          "mae_scaled": 2.5213634399137814,
          "rmse_scaled": 2.6671520946550435,
          "best_scalar_name": "ratio_median",
          "best_scalar_value": 3.5715766468066352
        }
      }
    }
  },
  "overview": {
    "amplitude_bias_mean": {
      "gs1_ideal": -2.293429989713721,
      "dose_legacy_gs2": -2.6449179724477516
    },
    "phase_bias_mean": {
      "gs1_ideal": 0.17777064789291386,
      "dose_legacy_gs2": 0.015086369100851657
    },
    "amplitude_abs_delta_vs_best": {
      "gs1_ideal": 0.0,
      "dose_legacy_gs2": 0.3514879827340307
    },
    "phase_abs_delta_vs_best": {
      "gs1_ideal": 0.1626842787920622,
      "dose_legacy_gs2": 0.0
    },
    "intensity_scale_absolute_delta": {
      "gs1_ideal": 0.0,
      "dose_legacy_gs2": 0.0
    },
    "training_nan_flags": {
      "gs1_ideal": false,
      "dose_legacy_gs2": false
    }
  }
}